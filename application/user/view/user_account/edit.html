
{extend name='public/base' /}
{block name='content'}
{include file='public/content_header' /}
    <section class="content">
        <div class="row">
            <div class="col-md-12">
                <div class="box box-primary">
                    <!-- 表单头部 -->
                    <div class="box-header with-border">
                        <div class="btn-group">
                            <a class="btn flat btn-sm btn-default BackButton">
                                <i class="fa fa-arrow-left"></i>
                                返回
                            </a>
                        </div>
                    </div>
                    <!-- 表单 -->
                    <form id="dataForm" class="form-horizontal dataForm" action="" method="post"
                          enctype="multipart/form-data">
                        <!-- 表单字段区域 -->
                        <div class="box-body">
                            <div class="form-group">
                                <label for="user_name" class="col-sm-2 control-label">用户昵称</label>
                                <div class="col-sm-10 col-md-4">
                                    <input id="user_name" name="user_name" value="{$data.user.user_name|default=''}"
                                           placeholder="请输入用户名" type="text" class="form-control field-text" disabled>
                                </div>
                            </div>
                            <div class="form-group">
                            <label for="mobiles" class="col-sm-2 control-label">用户手机号</label>
                            <div class="col-sm-10 col-md-4">
                                <input id="mobiles" name="mobiles" value="{$data.user.mobile|default=''}"
                                       placeholder="请输入手机号" type="text" class="form-control field-text" disabled>
                            </div>
                            </div>
<!--                            <div class="form-group">-->
<!--                                <label for="mobile" class="col-sm-2 control-label">账户类型</label>-->
<!--                                <div class="col-sm-10 col-md-4">-->
<!--                                    <input id="mobile" name="mobile" value="{$data.mobile|default=''}"-->
<!--                                           placeholder="请输入真实姓名" type="text" class="form-control field-text">-->
<!--                                </div>-->
<!--                            </div>-->
                            <div class="form-group">
                                <label for="id_number" class="col-sm-2 control-label">身份证号</label>
                                <div class="col-sm-10 col-md-4">
                                    <input id="id_number" name="id_number" value="{$data.id_number|default=''}"
                                           placeholder="请输入身份证号" type="text" class="form-control field-text">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="mobile" class="col-sm-2 control-label">手机号</label>
                                <div class="col-sm-10 col-md-4">
                                    <input id="mobile" name="mobile" value="{$data.mobile|default=''}" placeholder="请输入手机号"
                                           type="tel"  class="form-control field-mobile">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="name" class="col-sm-2 control-label">姓名</label>
                                <div class="col-sm-10 col-md-4">
                                    <input id="name" name="name" value="{$data.name|default=''}" placeholder="请输入姓名"
                                           type="tel" maxlength="11" class="form-control field-mobile">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="bank" class="col-sm-2 control-label">银行名</label>
                                <div class="col-sm-10 col-md-4">
                                    <input id="bank" name="bank" value="{$data.bank|default=''}" placeholder="请输入银行名"
                                           type="tel" maxlength="11" class="form-control field-mobile">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="bank_name" class="col-sm-2 control-label">开户行名</label>
                                <div class="col-sm-10 col-md-4">
                                    <input id="bank_name" name="bank_name" value="{$data.bank_name|default=''}" placeholder="请输入开户行名"
                                           type="tel" maxlength="11" class="form-control field-mobile">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="bank_code" class="col-sm-2 control-label">银行卡号</label>
                                <div class="col-sm-10 col-md-4">
                                    <input id="bank_code" name="bank_code" value="{$data.bank_code|default=''}" placeholder="请输入银行卡号"
                                           type="tel"  class="form-control field-mobile">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="alipay_code" class="col-sm-2 control-label">阿里账号</label>
                                <div class="col-sm-10 col-md-4">
                                    <input id="alipay_code" name="alipay_code" value="{$data.alipay_code|default=''}" placeholder="请输入阿里账号"
                                           type="tel" class="form-control field-mobile">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="status" class="col-sm-2 control-label">是否启用</label>
                                <div class="col-sm-10 col-md-4">
                                    <input class="input-switch" id="status" value="1" {if !isset($data) ||$data.status==1} checked{/if} type="checkbox"/>
                                    <input class="switch field-switch" placeholder="是否启用" name="status"
                                           value="{$data.status|default='1'}" hidden/>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="is_default" class="col-sm-2 control-label">是否默认</label>
                                <div class="col-sm-10 col-md-4">
                                    <input class="input-switch" id="is_default" value="1" {if !isset($data) ||$data.is_default==1} checked{/if} type="checkbox"/>
                                    <input class="switch field-switch" placeholder="是否默认" name="is_default"
                                           value="{$data.is_default|default='1'}" hidden/>
                                </div>
                            </div>

                            <script>
                                $('#status,#is_default').bootstrapSwitch({
                                    onText: "是",
                                    offText: "否",
                                    onColor: "success",
                                    offColor: "danger",
                                    onSwitchChange: function (event, state) {
                                        $(event.target).closest('.bootstrap-switch').next().val(state ? '1' : '0').change();
                                    }
                                });
                            </script>
                        </div>
                        <!-- 表单底部 -->
                        <div class="box-footer">
                            {:token()}
                            <div class="col-sm-2">
                            </div>
                            <div class="col-sm-10 col-md-4">
                                {if !isset($data)}
                                <!--                            <div class="btn-group pull-right">-->
                                <!--                                <label class="createContinue">-->
                                <!--                                    <input type="checkbox" value="1" id="_create" name="_create"-->
                                <!--                                           title="继续添加数据">继续添加</label>-->
                                <!--                            </div>-->
                                {/if}
                                <div class="btn-group">
                                    <button type="submit" class="btn flat btn-info dataFormSubmit">
                                        保存
                                    </button>
                                </div>
                                <div class="btn-group">
                                    <button type="reset" class="btn flat btn-default dataFormReset">
                                        重置
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>
    <script>
        /** 表单验证 **/
        $.validator.addMethod("isMobile", function(value, element) {
            var length = value.length;
            var mobile = /^(13[0-9]{9})|(18[0-9]{9})|(14[0-9]{9})|(17[0-9]{9})|(15[0-9]{9})$/;
            return this.optional(element) || (length == 11 && mobile.test(value));
        }, "请正确填写您的手机号码");
        $('#dataForm').validate({
            rules: {
                'id_number': {
                    required: true,
                },
                'mobile': {
                    required: true,
                    isMobile: true,
                },
                'name': {
                    required: true,
                },
                'bank': {
                    required: true,
                },
                'bank_name': {
                    required: true,
                },
                'bank_code': {
                    required: true,
                    digits  : true,
                },
                'alipay_code': {
                    required : true,
                },


            },
            messages: {
                'id_number': {
                    required: "身份证号不能为空",
                },
                'mobile': {
                    required: "手机号不能为空",
                },
                'name': {
                    required: "姓名不能为空",
                },
                'bank': {
                    required: "开户行不能为空",
                },
                'bank_name': {
                    required: "银行名不能为空",
                },
                'bank_code': {
                    required: "银行卡号不能为空",
                },
                'alipay_code': {
                    required: "阿里账号不能为空",
                },

            }
        });
    </script>
{/block}
